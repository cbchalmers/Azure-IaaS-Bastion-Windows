# Project Title

Provision Windows Server 2019 instance and dependant resources in Azure using Terraform which can then be used as a bastion for accessing other project work. 

## Description

Standalone Windows Server 2019 instance within a VNET, with a public IP address protected by a network security group which will allow whitelisted access from your chosen location. Intention of this project is to have a modular bastion environment which could be peered to other virtual networks.

#### Resources Provisioned

* Virtual Network & Subnets
* Route Table
* Network Security Group
* Public IP Address
* Windows Server 2019 Instance
* Storage Account

### Prerequisites

* [Download and Install Terraform](https://www.terraform.io/downloads.html)
* [Create a Service Principal for Terraform](https://www.terraform.io/docs/providers/azurerm/guides/service_principal_client_secret.html#creating-a-service-principal)

### Installing

* Populate client_id and client_secret inside global_main.tf from the Service Principal you created in the prerequisites
* Populate subscription_id and tenant_id inside global_main.tf from your Azure tenant information
* Populate resource_location inside global_vars.tf with your desired location to provision the resources. Eg UK South
* Populate resource_prefix inside global_vars.tf with your desired prefix for the provisioned resources. Eg CC-D-UKS
* Populate remote_location inside global_vars.tf with your public IP address. This will allow whitelisted access to the provisioned instance and storage account
* Populate admin_username and admin_password inside global_vars.tf with appropriate values which will then be used to log into the instance

The [terraform init](https://www.terraform.io/docs/commands/init.html)  command is used to initialize a working directory containing Terraform configuration files. This is the first command that should be run after writing a new Terraform configuration or cloning an existing one from version control. It is safe to run this command multiple times

```
terraform init
```

The [terraform plan](https://www.terraform.io/docs/commands/plan.html) command is used to create an execution plan. Terraform performs a refresh, unless explicitly disabled, and then determines what actions are necessary to achieve the desired state specified in the configuration files. This command is a convenient way to check whether the execution plan for a set of changes matches your expectations without making any changes to real resources or to the state. For example, terraform plan might be run before committing a change to version control, to create confidence that it will behave as expected.

```
terraform plan
```

The [terraform apply](https://www.terraform.io/docs/commands/apply.html) command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan.

```
terraform apply
```

### Removing

The [terraform destroy](https://www.terraform.io/docs/commands/destroy.html) command is used to destroy the Terraform-managed infrastructure.

```
terraform destroy
```

## Built With

* [Terraform Azure RM Provider](https://www.terraform.io/docs/providers/azurerm/index.html)

## References

* [Terraform Commands](https://www.terraform.io/docs/commands/index.html)
* [Terraform Azure RM Provider](https://www.terraform.io/docs/providers/azurerm/index.html)

## Authors

Chris Chalmers - [LinkedIn](https://uk.linkedin.com/in/chris-chalmers)